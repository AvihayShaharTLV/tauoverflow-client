{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\avikef\\\\Desktop\\\\New folder (10)\\\\src\\\\pages\\\\exam-page\\\\ExamPage.js\",\n    _s = $RefreshSig$();\n\nimport CourseHeader from \"../../components/course-header/CourseHeader\";\nimport QuestionSelector from \"../../components/question-selector/QuestionSelector\";\nimport H4 from \"../../general-components/H4\";\nimport { DocumentTextIcon } from '@heroicons/react/solid';\nimport { getAllTests, getAllExams, getAllSolutions } from \"../../API/testApi\";\nimport { getAllCourses } from '../../API/courseApi';\nimport { useParams } from \"react-router\";\nimport { useState, useEffect } from \"react\";\nimport Discussions from \"../../components/discussions/Discussions\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst ExamPage = _ref => {\n  _s();\n\n  let {\n    examDefenition,\n    setExamDefenition,\n    newExamUploaded,\n    newSolutionUploaded,\n    setIsPopupOpen,\n    isPopupOpen,\n    setPopupType,\n    contentUpdated\n  } = _ref;\n  const [courseName, setCourseName] = useState('');\n  const [questionsNum, setQuestionsNum] = useState(0);\n  const [questionSelected, setQuestionSelected] = useState(-1);\n  const [allExams, setAllExams] = useState([]);\n  const [currentTest, setCurrentTest] = useState(null);\n  const [allSolutions, setAllSolutions] = useState([]);\n  const IDs = useParams();\n\n  const updateSolutions = async () => {\n    const solutions = await getAllSolutions();\n    let correctSolutions = solutions.data.data.allSolutions.nodes.filter(solution => solution.tid == IDs.examID);\n    setAllSolutions(correctSolutions);\n  };\n\n  const updateExams = async () => {\n    const exams = await getAllExams();\n    let correctExams = exams.data.data.allExams.nodes.filter(exam => exam.tid == IDs.examID);\n    setAllExams(correctExams);\n  };\n\n  useEffect(() => {\n    updateExams();\n  }, [newExamUploaded]);\n  useEffect(() => {\n    updateSolutions();\n  }, [newSolutionUploaded]);\n  useEffect(() => {\n    (async () => {\n      try {\n        var _response$data, _response$data$data, _response$data$data$a;\n\n        updateExams();\n        updateSolutions();\n        const response = await getAllCourses();\n        const allCourses = response === null || response === void 0 ? void 0 : (_response$data = response.data) === null || _response$data === void 0 ? void 0 : (_response$data$data = _response$data.data) === null || _response$data$data === void 0 ? void 0 : (_response$data$data$a = _response$data$data.allCourses) === null || _response$data$data$a === void 0 ? void 0 : _response$data$data$a.nodes;\n        allCourses.forEach(course => {\n          if (course.id === IDs.courseID) {\n            setCourseName(course.name);\n          }\n        });\n        const tests = await getAllTests();\n        tests.data.data.allTests.nodes.forEach(test => {\n          if (test.cid.trim() === IDs.courseID && parseInt(test.id) === parseInt(IDs.examID)) {\n            setCurrentTest(test);\n            setExamDefenition({\n              \"year\": test.year,\n              \"period\": test.period,\n              \"semester\": test.semester\n            });\n            setQuestionsNum(test.questionsNum);\n          }\n        });\n      } catch (error) {\n        console.log(error);\n      }\n    })();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      dir: \"rtl\",\n      className: \"flex shadow rounded-lg p-5 flex-col dark:bg-gray-900 mx-auto my-10 items-center max-w-7xl\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full\",\n        children: [/*#__PURE__*/_jsxDEV(CourseHeader, {\n          setPopupType: setPopupType,\n          isPopupOpen: isPopupOpen,\n          setIsPopupOpen: setIsPopupOpen,\n          courseName: courseName,\n          examID: examDefenition,\n          discussionBTN: 'דיון חדש',\n          filesUploadBTN: 'העלה טופס'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-around items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex mr-5 dark:text-white\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"my-2 mx-5 \",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: allExams.length == 0 ? /*#__PURE__*/_jsxDEV(H4, {\n                  text: 'אין מבחנים לתצוגה'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 82,\n                  columnNumber: 61\n                }, this) : /*#__PURE__*/_jsxDEV(H4, {\n                  text: 'טופס המבחן'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 82,\n                  columnNumber: 97\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 81,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"max-h-xxs px-2 scrollbar scrollbar-thin scrollbar-thumb-rounded-full scrollbar-track-rounded-full scrollbar-track-gray-200 scrollbar-thumb-gray-400 dark:scrollbar-track-gray-100 dark:scrollbar-thumb-gray-500 pl-5 overflow-y-auto rounded-xl\",\n                children: allExams.map((exam, index) => {\n                  return /*#__PURE__*/_jsxDEV(\"a\", {\n                    href: exam.downloadLink,\n                    target: \"_blank\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex items-center bg-gray-100 dark:bg-gray-500 rounded-full my-2 py-1 hover:bg-gray-200 transition ease-in-out px-3 justify-center shadow\",\n                      children: [/*#__PURE__*/_jsxDEV(DocumentTextIcon, {\n                        className: \"cursor-pointer h-7 w-7 text-indigo-600 hover:text-indigo-700\",\n                        \"aria-hidden\": \"true\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 89,\n                        columnNumber: 53\n                      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                        className: \"dark:text-black\",\n                        children: [\"\\u05E0\\u05D5\\u05E1\\u05D7 \\u05D1\", exam.language]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 90,\n                        columnNumber: 53\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 88,\n                      columnNumber: 49\n                    }, this)\n                  }, index, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 87,\n                    columnNumber: 45\n                  }, this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 84,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"my-2 mx-5 \",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: allSolutions.length == 0 ? /*#__PURE__*/_jsxDEV(H4, {\n                  text: 'אין פתרונות לתצוגה'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 98,\n                  columnNumber: 65\n                }, this) : /*#__PURE__*/_jsxDEV(H4, {\n                  text: 'פתרונות'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 98,\n                  columnNumber: 102\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 97,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"max-h-xxs px-2 scrollbar scrollbar-thin scrollbar-thumb-rounded-full scrollbar-track-rounded-full scrollbar-track-gray-200 scrollbar-thumb-gray-400 dark:scrollbar-track-gray-100 dark:scrollbar-thumb-gray-500 pl-5 overflow-y-auto rounded-xl\",\n                children: allSolutions.map((solution, index) => {\n                  return /*#__PURE__*/_jsxDEV(\"a\", {\n                    href: solution.downloadLink,\n                    target: \"_blank\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex items-center bg-gray-100 dark:bg-gray-500 rounded-full my-2 py-1 hover:bg-gray-200 transition ease-in-out px-3 justify-center shadow\",\n                      children: [/*#__PURE__*/_jsxDEV(DocumentTextIcon, {\n                        className: \"cursor-pointer h-7 w-7 text-indigo-600 hover:text-indigo-700\",\n                        \"aria-hidden\": \"true\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 105,\n                        columnNumber: 53\n                      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                        className: \"dark:text-black\",\n                        children: [index + 1, \". \\u05E6\\u05D9\\u05D5\\u05DF - \", solution.grade]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 106,\n                        columnNumber: 53\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 104,\n                      columnNumber: 49\n                    }, this)\n                  }, index, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 103,\n                    columnNumber: 45\n                  }, this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 100,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(QuestionSelector, {\n            questionsNum: questionsNum,\n            questionSelected: questionSelected,\n            setQuestionSelected: setQuestionSelected\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Discussions, {\n          type: 'exam',\n          contentUpdated: contentUpdated\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n};\n\n_s(ExamPage, \"dPNwM4HXJsrdUgCv1c2pcSMxrck=\", false, function () {\n  return [useParams];\n});\n\n_c = ExamPage;\nexport default ExamPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"ExamPage\");","map":{"version":3,"sources":["C:/Users/avikef/Desktop/New folder (10)/src/pages/exam-page/ExamPage.js"],"names":["CourseHeader","QuestionSelector","H4","DocumentTextIcon","getAllTests","getAllExams","getAllSolutions","getAllCourses","useParams","useState","useEffect","Discussions","ExamPage","examDefenition","setExamDefenition","newExamUploaded","newSolutionUploaded","setIsPopupOpen","isPopupOpen","setPopupType","contentUpdated","courseName","setCourseName","questionsNum","setQuestionsNum","questionSelected","setQuestionSelected","allExams","setAllExams","currentTest","setCurrentTest","allSolutions","setAllSolutions","IDs","updateSolutions","solutions","correctSolutions","data","nodes","filter","solution","tid","examID","updateExams","exams","correctExams","exam","response","allCourses","forEach","course","id","courseID","name","tests","allTests","test","cid","trim","parseInt","year","period","semester","error","console","log","length","map","index","downloadLink","language","grade"],"mappings":"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","sourcesContent":["import CourseHeader from \"../../components/course-header/CourseHeader\"\nimport QuestionSelector from \"../../components/question-selector/QuestionSelector\"\nimport H4 from \"../../general-components/H4\"\nimport { DocumentTextIcon } from '@heroicons/react/solid'\nimport { getAllTests, getAllExams, getAllSolutions } from \"../../API/testApi\";\nimport { getAllCourses } from '../../API/courseApi'\nimport { useParams } from \"react-router\"\nimport { useState, useEffect } from \"react\"\nimport Discussions from \"../../components/discussions/Discussions\"\n\nconst ExamPage = ({ examDefenition, setExamDefenition, newExamUploaded, newSolutionUploaded, setIsPopupOpen, isPopupOpen, setPopupType, contentUpdated }) => {\n\n    const [courseName, setCourseName] = useState('');\n    const [questionsNum, setQuestionsNum] = useState(0);\n    const [questionSelected, setQuestionSelected] = useState(-1);\n    const [allExams, setAllExams] = useState([]);\n    const [currentTest, setCurrentTest] = useState(null);\n    const [allSolutions, setAllSolutions] = useState([]);\n    const IDs = useParams();\n\n    const updateSolutions = async () => {\n        const solutions = await getAllSolutions();\n        let correctSolutions = solutions.data.data.allSolutions.nodes.filter(solution =>\n            solution.tid == IDs.examID);\n        setAllSolutions(correctSolutions);\n    }\n    const updateExams = async () => {\n        const exams = await getAllExams();\n        let correctExams = exams.data.data.allExams.nodes.filter(exam =>\n            exam.tid == IDs.examID);\n        setAllExams(correctExams);\n    }\n\n    useEffect(() => {\n        updateExams();\n    }, [newExamUploaded])\n\n    useEffect(() => {\n        updateSolutions();\n    }, [newSolutionUploaded])\n\n    useEffect(() => {\n        (async () => {\n            try {\n                updateExams();\n                updateSolutions();\n                const response = await getAllCourses();\n                const allCourses = response?.data?.data?.allCourses?.nodes;\n                allCourses.forEach(course => {\n                    if (course.id === IDs.courseID) {\n                        setCourseName(course.name);\n                    }\n                });\n                const tests = await getAllTests();\n                tests.data.data.allTests.nodes.forEach(test => {\n                    if (test.cid.trim() === IDs.courseID && parseInt(test.id) === parseInt(IDs.examID)) {\n                        setCurrentTest(test);\n                        setExamDefenition({\n                            \"year\": test.year,\n                            \"period\": test.period,\n                            \"semester\": test.semester\n                        })\n                        setQuestionsNum(test.questionsNum);\n                    }\n                })\n            }\n            catch (error) {\n                console.log(error);\n            }\n        })();\n    }, [])\n\n    return (\n        <>\n            <div dir='rtl' className=\"flex shadow rounded-lg p-5 flex-col dark:bg-gray-900 mx-auto my-10 items-center max-w-7xl\">\n                <div className=\"w-full\">\n                    <CourseHeader setPopupType={setPopupType} isPopupOpen={isPopupOpen} setIsPopupOpen={setIsPopupOpen} courseName={courseName} examID={examDefenition} discussionBTN={'דיון חדש'} filesUploadBTN={'העלה טופס'} />\n                    <div className=\"flex justify-around items-center\">\n                        <div className=\"flex mr-5 dark:text-white\">\n                            <div className=\"my-2 mx-5 \">\n                                <div>\n                                    {allExams.length == 0 ? <H4 text={'אין מבחנים לתצוגה'} /> : <H4 text={'טופס המבחן'} />}\n                                </div>\n                                <div className=\"max-h-xxs px-2 scrollbar scrollbar-thin scrollbar-thumb-rounded-full scrollbar-track-rounded-full scrollbar-track-gray-200 scrollbar-thumb-gray-400 dark:scrollbar-track-gray-100 dark:scrollbar-thumb-gray-500 pl-5 overflow-y-auto rounded-xl\">\n                                    {allExams.map((exam, index) => {\n                                        return (\n                                            <a key={index} href={exam.downloadLink} target=\"_blank\">\n                                                <div className=\"flex items-center bg-gray-100 dark:bg-gray-500 rounded-full my-2 py-1 hover:bg-gray-200 transition ease-in-out px-3 justify-center shadow\">\n                                                    <DocumentTextIcon className=\"cursor-pointer h-7 w-7 text-indigo-600 hover:text-indigo-700\" aria-hidden=\"true\" />\n                                                    <p className=\"dark:text-black\">נוסח ב{exam.language}</p>\n                                                </div>\n                                            </a>)\n                                    })}\n                                </div>\n                            </div>\n                            <div className=\"my-2 mx-5 \">\n                                <div>\n                                    {allSolutions.length == 0 ? <H4 text={'אין פתרונות לתצוגה'} /> : <H4 text={'פתרונות'} />}\n                                </div>\n                                <div className=\"max-h-xxs px-2 scrollbar scrollbar-thin scrollbar-thumb-rounded-full scrollbar-track-rounded-full scrollbar-track-gray-200 scrollbar-thumb-gray-400 dark:scrollbar-track-gray-100 dark:scrollbar-thumb-gray-500 pl-5 overflow-y-auto rounded-xl\">\n                                    {allSolutions.map((solution, index) => {\n                                        return (\n                                            <a key={index} href={solution.downloadLink} target=\"_blank\">\n                                                <div className=\"flex items-center bg-gray-100 dark:bg-gray-500 rounded-full my-2 py-1 hover:bg-gray-200 transition ease-in-out px-3 justify-center shadow\">\n                                                    <DocumentTextIcon className=\"cursor-pointer h-7 w-7 text-indigo-600 hover:text-indigo-700\" aria-hidden=\"true\" />\n                                                    <p className=\"dark:text-black\">{index + 1}. ציון - {solution.grade}</p>\n                                                </div>\n                                            </a>)\n                                    })}\n                                </div>\n                            </div>\n                        </div>\n                        <QuestionSelector questionsNum={questionsNum} questionSelected={questionSelected} setQuestionSelected={setQuestionSelected} />\n                    </div>\n                    <Discussions type={'exam'} contentUpdated={contentUpdated} />\n                </div>\n            </div>\n        </>\n    )\n}\nexport default ExamPage"]},"metadata":{},"sourceType":"module"}